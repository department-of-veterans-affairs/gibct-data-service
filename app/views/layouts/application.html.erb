<!DOCTYPE html>
<html lang="en">
<head>
  <title>GibctDataService</title>
  <%= stylesheet_link_tag    'application', media: 'all' %>

  <!-- Load legacy Sprockets assets (e.g. jQuery, Bootstrap) -->
  <!-- TO DO: convert legacy jquery to hotwire stimulus -->
  <%= javascript_include_tag 'application', 'data-turbo-track': 'reload', nonce: '**CSP_NONCE**' %>

  <!-- Load modern ES6 modules via Importmap (e.g. Stimulus controllers) -->
  <!-- Override default 'application.js' with 'main.js' to avoid name-collision with legacy app/assets/javascripts/application.js -->
  <%= javascript_importmap_tags_with_nonce %>

  <%= csrf_meta_tags %>
</head> 
<body>
	<%= render 'layouts/navbar' %>
	<%= render 'layouts/messages' %>
  <%= render '/layouts/header' %>

	<div class="container-fluid">
		<%= yield %>
	</div>

  <% if preview_generation_started? %>
    <div
      id="preview_status_poller"
      data-controller="preview-status"
      data-preview-status-url-value="<%= format_url(dashboard_preview_status_path) %>"
      data-preview-status-completed-value="<%= preview_generation_completed? %>">
    </div>
  <% end %>
</body>
</html>