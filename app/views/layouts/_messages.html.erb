<% if alert.present? %>
	<aside class="alert alert-danger">
		<% if alert.is_a? Hash %>
			<% alert.each_pair do |label, alerts| %>
				<%= pretty_error(alerts, label) %>
			<% end %>
		<% else %>
			<%= pretty_error(alert, notice || '') %>
		<% end %>
	</aside>
<% end %>

<div id="preview_status">
	<% if notice.present? %>
		<aside class="alert alert-info">
			<% if notice.is_a? Hash %>
				<% notice.each_pair do |label, notices| %>
					<%= pretty_error(notices, label) %>
				<% end %>
			<% else %>
				<%= notice.html_safe %>
			<% end %>
		</aside>
	<% elsif preview_generation_started? %>
		<aside class="alert alert-info">
			<%= latest_preview_status.current_progress.html_safe %>
		</aside>
	<% end %>
</div>

<% if preview_generation_started? %>
	<div
		id="preview_status_poller"
		data-controller="preview-status"
		data-preview-status-url-value="<%= format_url(poll_preview_status_path) %>">
	</div>
<% end %>
